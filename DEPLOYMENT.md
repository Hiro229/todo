# TODO App - Production Deployment Guide

## Render Deployment Setup

### Prerequisites
1. GitHub repository with the TODO app code
2. Render account connected to your GitHub

### Database Setup
A PostgreSQL database is already configured with:
- **Hostname**: `dpg-d1ks3615pdvs73b82g7g-a`
- **Port**: `5432`
- **Database**: `todo_db_22qu`
- **Username**: `todo_user`
- **Password**: [Get from Render Dashboard]

### Backend Deployment Steps

1. **Prepare Environment Variables**
   - Copy `render.production.yaml` to `render.yaml`
   - Update the `DATABASE_URL` with the actual password from Render dashboard
   - Update `CORS_ORIGINS` with your frontend domain

2. **Deploy to Render**
   ```bash
   # Commit and push changes
   git add .
   git commit -m "Configure production deployment settings"
   git push origin main
   ```

3. **Configure Render Service**
   - Create a new Web Service in Render
   - Connect to your GitHub repository
   - Use the configuration from `render.yaml`
   - Set environment variables as specified

### Production Configuration

#### Key Environment Variables
- `ENVIRONMENT=production`
- `DEBUG=false`
- `DATABASE_URL=postgresql://todo_user:[PASSWORD]@dpg-d1ks3615pdvs73b82g7g-a:5432/todo_db_22qu`
- `JWT_SECRET_KEY` (auto-generated by Render)
- `CORS_ORIGINS=["https://your-frontend-domain.com"]`

#### Performance Settings
- **Server**: Gunicorn with 2 workers
- **Rate Limiting**: 
  - Auth endpoints: 5 requests/minute
  - API endpoints: 50 requests/minute
- **Request Size Limit**: 1MB
- **Health Check**: `/health` endpoint

### Security Features

1. **JWT Authentication**: All API endpoints require authentication
2. **Rate Limiting**: Prevents API abuse
3. **CORS**: Restricted to specified frontend domains
4. **Security Headers**: Added by security middleware
5. **Request Size Limiting**: Prevents large payload attacks

### Database Migration

Database migrations are automatically run on deployment via the startup script:
```bash
alembic upgrade head
```

### Monitoring

- **Health Check**: Available at `/health`
- **Status Endpoint**: Available at `/` (shows app info)
- **Logs**: Available in Render dashboard

### Troubleshooting

1. **Database Connection Issues**
   - Verify DATABASE_URL is correct
   - Check database password in Render dashboard
   - Ensure database service is running

2. **CORS Issues**
   - Update CORS_ORIGINS environment variable
   - Ensure frontend domain is correctly specified

3. **Migration Failures**
   - Check database connectivity
   - Verify Alembic configuration
   - Review migration logs in Render dashboard

### Production Checklist

- [ ] Database password updated in render.yaml
- [ ] CORS_ORIGINS updated with frontend domain
- [ ] JWT_SECRET_KEY configured (auto-generated)
- [ ] Rate limiting configured appropriately
- [ ] Health check endpoint responding
- [ ] Database migrations completed successfully
- [ ] Security headers configured
- [ ] Gunicorn configured for production load

### API Documentation

Once deployed, the API will be available at:
- **Base URL**: `https://your-service-name.onrender.com`
- **Health Check**: `/health`
- **API Endpoints**: `/api/tasks`, `/api/categories`
- **Authentication**: `/auth/login`, `/auth/register`

### Next Steps

1. Configure frontend to use the production API URL
2. Set up monitoring and alerting
3. Configure backup strategy for database
4. Consider upgrading to paid plan for better performance